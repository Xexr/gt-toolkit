# Multimodal Design Scope Questions (3x3 Matrix)
#
# Each model (Opus, GPT, Gemini) explores ALL THREE perspectives:
# - User Advocate: What do users expect?
# - Product Designer: What's the UX flow?
# - Domain Expert: What's missing from the problem domain?
#
# Result: 9 analyses -> 3 model documents -> 1 synthesized question backlog
#
# Usage:
#   gt sling spec-multimodal-scope-questions dypt/crew/neo \
#     --var feature="task-recommendations" \
#     --var brief="Add an AI feature that recommends what to work on next..."

description = """
Surface design blind spots using a 3x3 matrix of models and perspectives.

Each model (Opus, GPT, Gemini) independently explores three perspectives:
- User Advocate: What would users expect? What's confusing?
- Product Designer: What's the UX flow? What interactions are implied?
- Domain Expert: What domain concepts are missing? What do similar products do?

This gives 9 individual analyses, consolidated into 3 model-specific documents,
then synthesized into a final prioritized question backlog.

This is a DESIGN pass focused on USER INTENT, not implementation.

## Step Lifecycle (Molecule Work Loop)

This formula runs as a molecule — each step is a wisp bead. Use the
standard molecule work loop to advance through steps:

```bash
# 1. Find your current step:
bd mol current <molecule-id>

# 2. Execute the step (follow its instructions)

# 3. Close the step when done:
bd close <step-id>

# 4. Find the next step:
bd mol current <molecule-id>

# 5. Repeat until molecule complete
```

`bd mol current` returns the next ready step (open + all blocking deps
closed). Closing a step unblocks the next one in the dependency chain.

**Crash recovery:** Each `bd close` is durable. If your session crashes,
the next session runs `gt prime` which detects the molecule on your hook
and shows progress. `bd mol current` picks up at the next unclosed step.

Do NOT batch-close all steps at the end — close each one as you finish it.
"""
formula = "spec-multimodal-scope-questions"
type = "workflow"
version = 10

[vars]
[vars.feature]
description = "Feature name (used for output directory: plans/{feature}/)"
required = true

[vars.brief]
description = "The initial feature brief or description to analyze"
required = true

# Placeholder step that will be expanded
[[steps]]
id = "scope-questions"
title = "Run 3x3 scope questions analysis"
description = "This step is expanded into the full 3x3 matrix analysis."

# Composition: expand the placeholder with the expansion formula
[compose]

[[compose.expand]]
target = "scope-questions"
with = "spec-multimodal-scope-questions-expansion"
